<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Orlitha‚Äôs Court Fitness Calculator</title>
  <meta name="description" content="Pick servant duties, set hours, and calculate burned calories. The Black Court approves." />

  <style>
    :root{
      --bg:#0b0c10;
      --panel:#11131a;
      --panel2:#0f1117;
      --text:#e9e9ee;
      --muted:#b8b8c6;
      --line:#23263a;
      --accent:#c9b7ff;
      --accent2:#9ad7ff;
      --danger:#ff6b8a;
      --ok:#82ffb4;
      --shadow: 0 16px 40px rgba(0,0,0,.45);
      --radius:16px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background:
        radial-gradient(1200px 600px at 20% -10%, rgba(201,183,255,.12), transparent 60%),
        radial-gradient(900px 500px at 90% 0%, rgba(154,215,255,.10), transparent 55%),
        radial-gradient(700px 450px at 60% 110%, rgba(255,107,138,.07), transparent 55%),
        var(--bg);
      color:var(--text);
      line-height:1.45;
    }
    .wrap{max-width:980px;margin:28px auto;padding:0 16px}
    header{
      display:flex;align-items:flex-start;justify-content:space-between;gap:14px;margin-bottom:18px
    }
    h1{font-size:26px;margin:0}
    .sub{margin:6px 0 0 0;color:var(--muted);max-width:60ch}
    .topBtns{display:flex;gap:10px;flex-wrap:wrap;align-items:center;justify-content:flex-end}
    .pill{
      border:1px solid var(--line);
      background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
      color:var(--text);
      padding:10px 12px;border-radius:999px;
      cursor:pointer;
      box-shadow: var(--shadow);
      display:inline-flex;align-items:center;gap:8px;
      user-select:none;
    }
    .pill:hover{border-color:rgba(201,183,255,.5)}
    .pill:active{transform:translateY(1px)}
    .grid{display:grid;grid-template-columns:1.4fr .9fr;gap:14px}
    @media (max-width:860px){.grid{grid-template-columns:1fr}}
    .card{
      background:linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
      border:1px solid var(--line);
      border-radius:var(--radius);
      padding:14px;
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .cardTitle{
      display:flex;align-items:center;justify-content:space-between;gap:10px;margin-bottom:10px
    }
    .cardTitle b{font-size:14px;letter-spacing:.2px}
    .hint{color:var(--muted);font-size:12px}
    .rows{display:flex;flex-direction:column;gap:10px}
    .row{
      display:grid;
      grid-template-columns: 1fr 160px;
      gap:10px;
      align-items:end;
    }
    @media (max-width:600px){.row{grid-template-columns:1fr}}
    label{display:block;font-weight:650;font-size:12px;color:var(--muted);margin:0 0 6px 2px}
    select,input{
      width:100%;
      padding:11px 12px;
      border-radius:12px;
      border:1px solid var(--line);
      background: rgba(10,11,18,.65);
      color:var(--text);
      outline:none;
    }
    select:focus,input:focus{border-color:rgba(201,183,255,.6); box-shadow:0 0 0 3px rgba(201,183,255,.12)}
    .btnRow{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
    .btn{
      border:1px solid var(--line);
      background: rgba(10,11,18,.55);
      color:var(--text);
      padding:10px 12px;border-radius:12px;
      cursor:pointer;
      display:inline-flex;align-items:center;gap:8px;
    }
    .btn:hover{border-color:rgba(154,215,255,.55)}
    .btn.primary{border-color:rgba(201,183,255,.6)}
    .btn.primary:hover{border-color:rgba(201,183,255,.9)}
    .btn:active{transform:translateY(1px)}
    .total{
      font-size:34px;font-weight:850;letter-spacing:.3px;margin:0;
      background:linear-gradient(90deg, var(--accent), var(--accent2));
      -webkit-background-clip:text;background-clip:text;color:transparent;
    }
    .detail{color:var(--muted);font-size:13px;margin:10px 0 0 0}
    .toast{
      margin-top:12px;
      border:1px solid var(--line);
      border-radius:12px;
      padding:10px 12px;
      color:var(--muted);
      background:rgba(10,11,18,.55);
      display:none;
    }
    .toast.ok{display:block;border-color:rgba(130,255,180,.35);color:rgba(130,255,180,.9)}
    .toast.bad{display:block;border-color:rgba(255,107,138,.35);color:rgba(255,107,138,.9)}
    footer{margin-top:16px;color:var(--muted);font-size:12px}
    .sig{opacity:.85}
    .smallcaps{font-variant:all-small-caps;letter-spacing:.8px}
  </style>
</head>

<body>
  <div class="wrap">
    <header>
      <div>
        <h1 id="t_title">üëë The Black Court Fitness Calculator</h1>
        <p class="sub" id="t_sub">
          Choose servant duties, set hours, and the court will calculate calories burned.
        </p>
      </div>
      <div class="topBtns">
        <button class="pill" id="langBtn" type="button" title="Toggle language">
          üåê <span id="t_lang">EN</span>
        </button>
        <button class="pill" id="copyBtnTop" type="button" title="Copy result">
          üìã <span id="t_copyTop">Copy result</span>
        </button>
      </div>
    </header>

    <div class="grid">
      <section class="card" aria-label="Calculator">
        <div class="cardTitle">
          <b id="t_pick">Pick duties</b>
          <span class="hint" id="t_hint">kcal per hour unless stated otherwise</span>
        </div>

        <div class="rows" id="rows">
          <!-- rows injected -->
        </div>

        <div class="btnRow">
          <button class="btn primary" id="addMore" type="button">‚ûï <span id="t_add">Add duty slot</span></button>
          <button class="btn" id="reset" type="button">‚Ü©Ô∏è <span id="t_reset">Reset</span></button>
          <button class="btn" id="copyBtn" type="button">üìã <span id="t_copy">Copy result</span></button>
        </div>

        <div class="toast" id="toast"></div>

        <footer>
          <div id="t_note">
            Numbers are rough estimates for light-to-moderate activity. The court accepts no liability for rebellions. üñ§
          </div>
        </footer>
      </section>

      <aside class="card" aria-label="Result">
        <div class="cardTitle">
          <b id="t_totalLabel">Total</b>
          <span class="hint smallcaps" id="t_mode">Black Court Mode</span>
        </div>

        <p class="total" id="total">0 kcal</p>
        <p class="detail" id="detail"></p>

        <div class="toast" id="toast2"></div>

        <footer class="sig" id="t_sig">
          ‚ÄúKeeping the Princess calm‚Äù counts as cardio. Emotional labor included.
        </footer>
      </aside>
    </div>
  </div>

<script>
  // Data: kcal per hour (approx.)
  const DUTIES = [
    { key:"beds", en:"Making beds & changing linens", de:"Betten machen & Bettw√§sche wechseln", kcal:120 },
    { key:"sweep", en:"Sweeping corridors", de:"Flure fegen", kcal:170 },
    { key:"mop", en:"Mopping stone floors", de:"Steinb√∂den wischen", kcal:250 },
    { key:"bath", en:"Scrubbing baths & washrooms", de:"Bad & Waschraum schrubben", kcal:220 },
    { key:"buckets", en:"Carrying water buckets", de:"Wassereimer tragen", kcal:300 },
    { key:"firewood", en:"Hauling firewood", de:"Feuerholz schleppen", kcal:350 },
    { key:"candles", en:"Lighting/replacing candles", de:"Kerzen anz√ºnden/ersetzen", kcal:100 },
    { key:"polish", en:"Polishing silver & mirrors", de:"Silber & Spiegel polieren", kcal:90 },
    { key:"laundry", en:"Washing laundry by hand", de:"W√§sche von Hand waschen", kcal:200 },
    { key:"hang", en:"Hanging wet laundry", de:"Nasse W√§sche aufh√§ngen", kcal:180 },
    { key:"iron", en:"Ironing & pressing garments", de:"Kleidung b√ºgeln & pressen", kcal:120 },
    { key:"windows", en:"Cleaning windows", de:"Fenster putzen", kcal:170 },
    { key:"carpets", en:"Beating carpets", de:"Teppiche ausklopfen", kcal:280 },
    { key:"kitchen", en:"Kitchen chopping & stirring", de:"K√ºche: schneiden & r√ºhren", kcal:150 },
    { key:"knead", en:"Kneading dough", de:"Teig kneten", kcal:250 },
    { key:"trays", en:"Carrying serving trays", de:"Serviertabletts tragen", kcal:140 },
    { key:"run", en:"Running between kitchen and hall", de:"Zwischen K√ºche & Saal laufen", kcal:300 },
    { key:"dishes", en:"Washing dishes", de:"Abwasch", kcal:120 },
    { key:"stables", en:"Cleaning stables", de:"Stall ausmisten", kcal:400 },
    { key:"horses", en:"Brushing horses", de:"Pferde striegeln", kcal:200 },
    { key:"supplies", en:"Fetching supplies (walking)", de:"Besorgungen holen (zu Fu√ü)", kcal:220 },
    { key:"stairs", en:"Climbing tower stairs", de:"Turmtreppen steigen", kcal:450 },
    { key:"attention", en:"Standing at attention", de:"Strammstehen", kcal:70 },
    { key:"doors", en:"Guarding doors (alert posture)", de:"T√ºren bewachen (wachsam)", kcal:120 },
    { key:"dig", en:"Digging in the garden", de:"Garten umgraben", kcal:350 },
    { key:"weed", en:"Weeding flower beds", de:"Beete j√§ten", kcal:220 },
    { key:"soil", en:"Carrying soil and pots", de:"Erde & T√∂pfe tragen", kcal:300 },
    { key:"bathwater", en:"Drawing/heating bath water", de:"Badewasser holen/erw√§rmen", kcal:280 },
    { key:"feet", en:"Foot massage", de:"Fu√ümassage", kcal:120 },
    { key:"hair", en:"Hair brushing & styling", de:"Haare b√ºrsten & frisieren", kcal:100 },
    { key:"corset", en:"Lacing corsets & dressing gowns", de:"Korsetts schn√ºren & ankleiden", kcal:130 },
    { key:"sew", en:"Sewing & mending", de:"N√§hen & flicken", kcal:80 },
    { key:"armor", en:"Cleaning armor", de:"R√ºstung reinigen", kcal:180 },
    { key:"chests", en:"Carrying chests & luggage", de:"Truhen & Gep√§ck tragen", kcal:400 },
    { key:"errands", en:"Running royal errands", de:"Hof-Botenl√§ufe", kcal:250 },
    { key:"train", en:"Holding parasols & gown trains", de:"Schleppen/Schirme tragen", kcal:90 },
    { key:"flowers", en:"Arranging flowers", de:"Blumen arrangieren", kcal:110 },
    { key:"letters", en:"Writing & delivering letters", de:"Briefe schreiben & zustellen", kcal:130 },
    { key:"soothe", en:"Soothing the Princess (anxious)", de:"Prinzessin beruhigen (√Ñngste)", kcal:300 },
    { key:"drama", en:"Calming royal drama", de:"K√∂nigliches Drama gl√§tten", kcal:350 },
    { key:"secrets", en:"Listening to royal worries & secrets", de:"Sorgen & Geheimnisse anh√∂ren", kcal:200 }
  ];

  const I18N = {
    en: {
      title:"üëë The Black Court Fitness Calculator",
      sub:"Choose servant duties, set hours, and the court will calculate calories burned.",
      pick:"Pick duties",
      hint:"kcal per hour unless stated otherwise",
      add:"Add duty slot",
      reset:"Reset",
      copy:"Copy result",
      copyTop:"Copy result",
      totalLabel:"Total",
      note:"Numbers are rough estimates for light-to-moderate activity. The court accepts no liability for rebellions. üñ§",
      sig:"‚ÄúKeeping the Princess calm‚Äù counts as cardio. Emotional labor included.",
      select:"Select a duty‚Ä¶",
      hours:"Hours",
      duty:"Duty",
      copied:"Copied to clipboard.",
      copyFail:"Could not copy. Select and copy manually.",
      breakdownEmpty:"Choose duties to see the breakdown."
    },
    de: {
      title:"üëë Der Fitness-Rechner des Schwarzen Hofes",
      sub:"W√§hle Diener-T√§tigkeiten, stelle Stunden ein, und der Hof berechnet die verbrannten Kalorien.",
      pick:"T√§tigkeiten w√§hlen",
      hint:"kcal pro Stunde, wenn nicht anders angegeben",
      add:"Slot hinzuf√ºgen",
      reset:"Zur√ºcksetzen",
      copy:"Ergebnis kopieren",
      copyTop:"Ergebnis kopieren",
      totalLabel:"Summe",
      note:"Zahlen sind grobe Richtwerte f√ºr leichte bis mittlere Aktivit√§t. Der Hof haftet nicht f√ºr Aufst√§nde. üñ§",
      sig:"‚ÄûDie Prinzessin beruhigen‚Äú z√§hlt als Cardio. Emotionale Arbeit inklusive.",
      select:"T√§tigkeit ausw√§hlen‚Ä¶",
      hours:"Stunden",
      duty:"T√§tigkeit",
      copied:"In die Zwischenablage kopiert.",
      copyFail:"Kopieren ging nicht. Bitte manuell markieren und kopieren.",
      breakdownEmpty:"W√§hle T√§tigkeiten, um die Aufschl√ºsselung zu sehen."
    }
  };

  let lang = "en";
  const MAX_INITIAL_ROWS = 4;

  function el(id){ return document.getElementById(id); }

  function setText(){
    const t = I18N[lang];
    el("t_title").textContent = t.title;
    el("t_sub").textContent = t.sub;
    el("t_pick").textContent = t.pick;
    el("t_hint").textContent = t.hint;
    el("t_add").textContent = t.add;
    el("t_reset").textContent = t.reset;
    el("t_copy").textContent = t.copy;
    el("t_copyTop").textContent = t.copyTop;
    el("t_totalLabel").textContent = t.totalLabel;
    el("t_note").textContent = t.note;
    el("t_sig").textContent = t.sig;
    el("t_lang").textContent = lang.toUpperCase();

    // Update select placeholders + labels
    document.querySelectorAll("[data-duty-row]").forEach((row, idx) => {
      row.querySelector("label[for^='task']").textContent = `${t.duty} ${idx+1}`;
      row.querySelector("label[for^='h']").textContent = t.hours;
      const sel = row.querySelector("select");
      const current = sel.value;
      fillSelect(sel);
      sel.value = current; // keep selection if possible
    });

    calc();
  }

  function fillSelect(sel){
    const t = I18N[lang];
    const current = sel.value;
    sel.innerHTML = "";
    const opt0 = document.createElement("option");
    opt0.value = "";
    opt0.textContent = t.select;
    sel.appendChild(opt0);

    for(const d of DUTIES){
      const o = document.createElement("option");
      o.value = d.key;
      const name = (lang === "en") ? d.en : d.de;
      o.textContent = `${name} ‚Äî ${d.kcal} kcal/h`;
      sel.appendChild(o);
    }
    sel.value = current;
  }

  function makeRow(i, hoursDefault){
    const t = I18N[lang];
    const row = document.createElement("div");
    row.className = "row";
    row.setAttribute("data-duty-row","1");

    const left = document.createElement("div");
    const lab1 = document.createElement("label");
    lab1.setAttribute("for", `task${i}`);
    lab1.textContent = `${t.duty} ${i}`;
    const sel = document.createElement("select");
    sel.id = `task${i}`;
    fillSelect(sel);
    left.appendChild(lab1);
    left.appendChild(sel);

    const right = document.createElement("div");
    const lab2 = document.createElement("label");
    lab2.setAttribute("for", `h${i}`);
    lab2.textContent = t.hours;
    const inp = document.createElement("input");
    inp.id = `h${i}`;
    inp.type = "number";
    inp.min = "0";
    inp.step = "0.25";
    inp.value = String(hoursDefault);
    right.appendChild(lab2);
    right.appendChild(inp);

    row.appendChild(left);
    row.appendChild(right);
    return row;
  }

  function initRows(){
    const rows = el("rows");
    rows.innerHTML = "";
    for(let i=1;i<=MAX_INITIAL_ROWS;i++){
      const hours = (i <= 3) ? 1 : 0;
      rows.appendChild(makeRow(i, hours));
    }
  }

  function getDutyByKey(key){
    return DUTIES.find(d => d.key === key);
  }

  function calc(){
    let total = 0;
    let parts = [];

    document.querySelectorAll("[data-duty-row]").forEach(row=>{
      const sel = row.querySelector("select");
      const hrs = row.querySelector("input");
      const key = sel.value;
      const h = Number(hrs.value || 0);
      if(key && h > 0){
        const d = getDutyByKey(key);
        if(!d) return;
        const sub = d.kcal * h;
        total += sub;
        const name = (lang === "en") ? d.en : d.de;
        parts.push(`${name}: ${sub.toFixed(0)} kcal`);
      }
    });

    el("total").textContent = `${total.toFixed(0)} kcal`;
    el("detail").textContent = parts.length ? parts.join(" ‚Ä¢ ") : I18N[lang].breakdownEmpty;
    return { total, parts };
  }

  function showToast(msg, ok=true){
    const toast = el("toast");
    toast.className = "toast " + (ok ? "ok" : "bad");
    toast.textContent = msg;
    setTimeout(()=>{ toast.className = "toast"; toast.textContent=""; }, 2200);
  }
  function showToast2(msg, ok=true){
    const toast = el("toast2");
    toast.className = "toast " + (ok ? "ok" : "bad");
    toast.textContent = msg;
    setTimeout(()=>{ toast.className = "toast"; toast.textContent=""; }, 2200);
  }

  async function copyResult(){
    const { total, parts } = calc();
    const header = (lang === "en")
      ? `Orlitha‚Äôs Court Fitness Result`
      : `Ergebnis: Fitness am Schwarzen Hof`;
    const body = parts.length ? parts.join("\n") : (lang==="en" ? "No duties selected." : "Keine T√§tigkeiten gew√§hlt.");
    const text =
`${header}
${"-".repeat(header.length)}
Total: ${total.toFixed(0)} kcal

${body}`;

    try{
      await navigator.clipboard.writeText(text);
      showToast(I18N[lang].copied, true);
      showToast2(I18N[lang].copied, true);
    }catch(e){
      // Fallback: prompt
      try{
        window.prompt(I18N[lang].copyFail, text);
      }catch(_){}
      showToast(I18N[lang].copyFail, false);
      showToast2(I18N[lang].copyFail, false);
    }
  }

  // Initialize
  initRows();
  setText();
  calc();

  // Listeners
  document.addEventListener("input", (e)=>{
    if(e.target.matches("select") || e.target.matches("input")) calc();
  });

  el("reset").addEventListener("click", ()=>{
    const rows = document.querySelectorAll("[data-duty-row]");
    rows.forEach((row, i)=>{
      row.querySelector("select").value = "";
      row.querySelector("input").value = (i < 3 ? 1 : 0);
    });
    calc();
  });

  el("addMore").addEventListener("click", ()=>{
    const rows = el("rows");
    const next = rows.querySelectorAll("[data-duty-row]").length + 1;
    rows.appendChild(makeRow(next, 1));
    setText(); // updates labels + select language
    calc();
  });

  el("langBtn").addEventListener("click", ()=>{
    lang = (lang === "en") ? "de" : "en";
    setText();
  });

  el("copyBtn").addEventListener("click", copyResult);
  el("copyBtnTop").addEventListener("click", copyResult);
</script>
</body>
</html>
